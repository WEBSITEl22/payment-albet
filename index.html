<!DOCTYPE html>
<html lang="id" class="dark">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Pembayaran QRIS Dinamis</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>tailwind.config = { darkMode: 'class' }</script>
  <style>
    @keyframes slideDown {
      0% { transform: translateY(-50px); opacity: 0; }
      100% { transform: translateY(0); opacity: 1; }
    }
    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      20%, 60% { transform: translateX(-10px); }
      40%, 80% { transform: translateX(10px); }
    }
    @keyframes fadeOut {
      0% { opacity: 1; }
      100% { opacity: 0; }
    }

    .animate-slide-down { animation: slideDown 1s ease-out forwards; }
    .shake { animation: shake 0.5s; }
    .fade-out { animation: fadeOut 3s forwards; }

    .overlay {
      position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      background-color: rgba(0, 0, 0, 0.6); display: none;
      justify-content: center; align-items: center;
      z-index: 50;
    }
    .overlay-content { text-align: center; color: white; }
    .qris-image { width: 200px; height: 200px; }
    .close-button, .confirm-button, .final-close {
      margin-top: 20px; background-color: red; color: white;
      padding: 10px 20px; border-radius: 5px; cursor: pointer;
    }
    .instruction-text {
      color: yellow; margin-top: 1rem; font-weight: bold;
    }
    #sendProofButton {
      position: fixed;
      bottom: 20px;
      left: 20px;
      background-color: green;
      color: white;
      padding: 10px 20px;
      border-radius: 10px;
      z-index: 60;
    }
  </style>
</head>
<body class="bg-gray-100 dark:bg-gray-900 min-h-screen flex items-center justify-center text-gray-800 dark:text-gray-100 transition">

  <!-- Notifikasi (hanya akan tampil saat login berhasil) -->
  <div id="welcomeText" class="hidden">
    <div class="bg-blue-500 text-white p-4 w-full text-center font-bold absolute top-0 left-0 z-10 animate-slide-down">
      <p>Selamat datang di Halaman Pembayaran, Scan QRIS sesuai nominal!</p>
    </div>
    <div class="bg-red-500 text-white p-4 w-full text-center font-bold absolute top-16 left-0 z-10 animate-slide-down">
      <p>Transfer Sesuai Nominal Jangan Sampai Salah!</p>
    </div>
  </div>

  <!-- Toggle Dark Mode -->
  <div class="absolute top-4 right-4">
    <label class="inline-flex items-center cursor-pointer">
      <input type="checkbox" id="toggleMode" class="sr-only" onchange="toggleDarkMode()" />
      <div class="w-10 h-5 bg-gray-300 rounded-full dark:bg-gray-700 p-1 flex items-center">
        <div class="w-4 h-4 bg-white rounded-full shadow-md transform transition-transform" id="toggleCircle"></div>
      </div>
    </label>
  </div>

  <!-- Login Box -->
  <div id="loginBox" class="bg-white dark:bg-gray-800 p-8 rounded-2xl shadow-xl text-center max-w-sm w-full">
    <h2 class="text-2xl font-bold mb-2">Login Terlebih Dahulu</h2>
    <p class="text-sm text-gray-500 dark:text-gray-300 mb-4">Untuk melanjutkan ke Payment Albet, silakan login terlebih dahulu.</p>
    <input type="text" id="username" placeholder="Username" class="mb-4 px-4 py-2 rounded-md border w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white" />
    <input type="password" id="password" placeholder="Password" class="mb-4 px-4 py-2 rounded-md border w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white" />
    <p id="loginError" class="text-red-500 mb-2 hidden">Username atau Password salah!</p>
    <button onclick="login()" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-xl w-full transition">Masuk</button>
  </div>

  <!-- Pesan Sukses -->
  <div id="loginSuccessMessage" class="bg-green-500 text-white p-4 w-full text-center font-bold absolute top-16 left-0 z-10 hidden animate-fade-out">
    <p>Selamat Login Berhasil, Harap Transfer Sertakan Bukti. Terimakasih.</p>
  </div>

  <!-- Container Pembayaran -->
  <div id="content-container" class="relative z-0 hidden">
    <div class="bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-xl text-center max-w-sm w-full mt-16">
      <h1 class="text-2xl font-bold mb-4">Pembayaran via QRIS</h1>

      <!-- Overlay QR -->
      <div id="overlay" class="overlay">
        <div class="overlay-content">
          <p id="amountDisplay" class="qris-text"></p>
          <div id="qrisImageContainer" class="qris-image-container">
            <img id="qrisImage" src="" alt="QRIS Dinamis" class="qris-image" />
          </div>
          <button id="confirmButton" class="confirm-button" onclick="confirmTransfer()">Konfirmasi Sudah Transfer</button>
          <button id="closeButton" class="close-button" onclick="closeQris()">Tutup</button>
        </div>
      </div>

      <p class="mb-4">Scan QR code ini dengan aplikasi e-wallet Anda</p>
      <div class="flex justify-center items-center space-x-4 mb-4">
        <img src="https://a.top4top.io/s_3412of75m0.png" alt="OVO" class="h-8" />
        <img src="https://b.top4top.io/s_3412c3elo1.jpeg" alt="DANA" class="h-8" />
        <img src="https://c.top4top.io/s_34123bk4m2.png" alt="GoPay" class="h-8" />
        <img src="https://d.top4top.io/s_3412ulaih3.png" alt="ShopeePay" class="h-8" />
      </div>

      <input type="number" id="transferAmount" placeholder="Masukkan jumlah transfer (min. 1000)" class="mt-4 mb-4 px-4 py-2 rounded-md border w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white" oninput="checkAmount()" />

      <button onclick="playTransferSound()" class="block bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded-xl transition duration-300 mb-2">
        Mohon Baca Terlebih Dahulu !
      </button>

      <!-- Tombol Pengarah -->
      <button onclick="window.open('https://whatsapp.com/channel/0029Vb5gVwU7oQhh1IZi7x21', '_blank')"
              class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-xl mt-2">
        Join saluran Admin Real ðŸ”¥
      </button>
    </div>
  </div>

  <!-- Audio -->
  <audio id="transferSound"><source src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_57ed4adbe0.mp3" type="audio/mpeg"></audio>
  <audio id="keyboardSound"><source src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_f6baff3f16.mp3" type="audio/mpeg"></audio>
  <audio id="qrisAppearSound"><source src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_57ed4adbe0.mp3" type="audio/mpeg"></audio>
  <audio id="errorSound"><source src="https://cdn.pixabay.com/download/audio/2023/03/03/audio_97e69d6b92.mp3" type="audio/mpeg"></audio>

  <script>
    function toggleDarkMode() {
      const html = document.documentElement;
      const circle = document.getElementById('toggleCircle');
      html.classList.toggle('dark');
      circle.classList.toggle('translate-x-5');
    }

    function login() {
      const username = document.getElementById('username').value.trim();
      const password = document.getElementById('password').value.trim();

      if (username === 'albet' && password === '224400') {
        document.getElementById('loginSuccessMessage').classList.remove('hidden');
        document.getElementById('welcomeText').classList.remove('hidden');

        setTimeout(() => {
          document.getElementById('loginSuccessMessage').classList.add('fade-out');
        }, 3000);

        document.getElementById('loginBox').classList.add('hidden');
        document.getElementById('content-container').classList.remove('hidden');
      } else {
        document.getElementById('loginError').classList.remove('hidden');
        document.getElementById('loginBox').classList.add('shake');
        document.getElementById('errorSound').play();

        setTimeout(() => {
          document.getElementById('loginBox').classList.remove('shake');
        }, 500);
      }
    }

    function checkAmount() {
      const amount = parseInt(document.getElementById("transferAmount").value);
      const overlay = document.getElementById("overlay");
      const amountDisplay = document.getElementById("amountDisplay");
      const qrisImage = document.getElementById("qrisImage");
      const qrisImageContainer = document.getElementById("qrisImageContainer");

      if (!isNaN(amount)) document.getElementById("keyboardSound").play();

      if (!isNaN(amount) && amount >= 1000 && amount <= 9999) {
        amountDisplay.textContent = `Jumlah: Rp ${amount.toLocaleString()}`;
        overlay.style.display = "flex";
        qrisImage.src = "https://g.top4top.io/p_34121qjxk0.png";
        qrisImageContainer.classList.add("animate-slide-down");
        document.getElementById("qrisAppearSound").play();
      } else {
        overlay.style.display = "none";
        qrisImageContainer.classList.remove("animate-slide-down");
      }
    }

    function confirmTransfer() {
      document.getElementById("closeButton").style.display = "none";
      document.getElementById("confirmButton").style.display = "none";

      if (!document.getElementById("instructionText")) {
        const instruction = document.createElement("p");
        instruction.id = "instructionText";
        instruction.textContent = "Kirimkan Bukti Transfer, Dengan cara Klik tombol hijau kiri Bawah.";
        instruction.className = "instruction-text text-center";
        document.getElementById("content-container").appendChild(instruction);
      }

      if (!document.getElementById("finalClose")) {
        const finalClose = document.createElement("button");
        finalClose.id = "finalClose";
        finalClose.className = "final-close";
        finalClose.textContent = "Tutup";
        finalClose.onclick = closeQris;
        document.getElementById("content-container").appendChild(finalClose);
      }

      if (!document.getElementById("sendProofButton")) {
        const sendProof = document.createElement("button");
        sendProof.id = "sendProofButton";
        sendProof.textContent = "Kirim Bukti Transfer";
        sendProof.onclick = () => {
          window.open("https://api.whatsapp.com/send?phone=6289662626560&text=Halo,%20saya%20sudah%20transfer%20via%20QRIS,%20Berikut%20bukti%20Transfer%20Nya", "_blank");
        };
        document.body.appendChild(sendProof);
      }
    }

    function playTransferSound() {
      document.getElementById("transferSound").play();
    }

    function closeQris() {
      document.getElementById("overlay").style.display = "none";
    }
  </script>
</body>
</html>